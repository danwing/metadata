



Network Working Group                                     S. Rajagopalan
Internet-Draft                                                   D. Wing
Intended status: Standards Track                    Cloud Software Group
Expires: 17 August 2024                                 14 February 2024


         Flow Metadata for Collaborative Host/Network Signaling
                     draft-rw-flow-metadata-latest

Abstract

   As part of host-to-network signaling, an entire flow can share the
   same metadata or certain packets can have certain metadata associated
   with those packets.  This document describes the metadata exchanged
   in a host-to-network signaling protocol in both binary and JSON.

   As part of network-to-host signaling, network metadata can be
   communicated to the host, allowing the host to modulate its requests
   to conform to the available network resources.

About This Document

   This note is to be removed before publishing as an RFC.

   The latest revision of this draft can be found at
   https://danwing.github.io/metadata/draft-rw-flow-metadata.md.html.
   Status information for this document may be found at
   https://datatracker.ietf.org/doc/draft-rw-flow-metadata/.

   Discussion of this document takes place on the TSV Working Group
   mailing list (mailto:tsvwg@ietf.org), which is archived at
   https://mailarchive.ietf.org/arch/browse/tsvwg/.  Subscribe at
   https://www.ietf.org/mailman/listinfo/tsvwg/.

   Source for this draft and an issue tracker can be found at
   https://github.com/danwing/metadata.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on 17 August 2024.

Copyright Notice

   Copyright (c) 2024 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents (https://trustee.ietf.org/
   license-info) in effect on the date of publication of this document.
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.  Code Components
   extracted from this document must include Revised BSD License text as
   described in Section 4.e of the Trust Legal Provisions and are
   provided without warranty as described in the Revised BSD License.

Table of Contents

   1.  Introduction
   2.  Conventions and Definitions
   3.  Host to Network Metadata
     3.1.  Importance
       3.1.1.  Application Treatment
       3.1.2.  Encoding
     3.2.  Reliable/Unreliable
       3.2.1.  Network Treatment
       3.2.2.  Encoding
     3.3.  Packet Nature/Preference
       3.3.1.  Packet Nature for Unreliable Traffic
         3.3.1.1.  Network Treatment
         3.3.1.2.  Encoding
       3.3.2.  Packet Nature for Reliable Traffic
         3.3.2.1.  Network Treatment
         3.3.2.2.  Encoding
   4.  Network to Host Metadata
     4.1.  Video Streaming Bandwidth
       4.1.1.  Host Treatment
       4.1.2.  Encoding
   5.  Security Considerations
   6.  IANA Considerations
   Acknowledgments
   References
     Normative References
     Informative References
   Appendix A.  Examples of Host-to-Network Metadata
     A.1.  Video Streaming
     A.2.  Interactive Gaming or Audio/Video
     A.3.  Remote Desktop Virtualization
   Appendix B.  Example of Network-to-Host Metadata for Video
           Streaming
   Authors' Addresses

1.  Introduction

   Host-to-network metadata signaling has historically been performed by
   the sender setting DSCP bits ([RFC7657])([RFC8837])([RFC2475]).
   While DSCP can express high priority (Expedited Forwarding [RFC3246])
   and low priority (Lower Effort PDB [RFC8622]), DSCP bits are
   frequently ignored at congestion points or lost (stripped) while
   routed across the Internet.  Also, DSCP attempts to influence the
   packet's treatment compared to all other packets from other hosts.

   Network-to-host metadata signaling has historically been performed by
   dropping packets or setting the ECN bit on packets.  Both of these
   techniques work well to consume the network's available bandwidth
   when the sending rate exceeds the network's available bandwidth, but
   are complicated for the receiver to determine the network's bandwidth
   policy rate.

   Both the above use cases are improved by metadata described in this
   document.  This document is a companion to host-to-network signaling
   the metadata itself, such as

   *  UDP Options (e.g., [I-D.kaippallimalil-tsvwg-media-hdr-wireless],
      [I-D.reddy-tsvwg-explcit-signal]),

   *  IPv6 Hop-by-Hop Options (Section 4.3 of [RFC8200]), or

   *  QUIC CID mapping ([I-D.wing-cidfi]).

   An analysis of most of those metadata signaling mechanisms is at
   [I-D.herbert-host2netsig].

   For host-to-network metadata, individual packets within a flow can
   contain metadata describing their drop preference and their
   reliability.  The network elements aware of this metadata can apply
   preferential or deferential treatment to those packets during a
   'reactive traffic policy' event.  Examples of metadata signaling for
   video streaming and for remote desktop are in Appendix A.

   For network-to-host metadata, the host can be informed of the network
   bandwidth policy for the subscriber to receive streaming video.  This
   policy can be used by video streaming applications on that client to
   choose video streams that fit within that policy.

2.  Conventions and Definitions

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   BCP 14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.

   Reactive policy:  Treatment given to a flow when an exceptional event
      occurs, such as diminished throughput to the host caused by radio
      interference or weak radio signal, congestion on the network
      caused by other users or other applications on the same host

   Intentional policy:  Configured bandwidth, pps, or similar throughput
      constraints applied to a flow, application, host, or subscriber.

3.  Host to Network Metadata

   Three bits are introduced.  A network element desiring the simplest
   interpretation can use the bits as a 3-bit 'importance' field, where
   higher values are more important and lower values are less important.
   Less importance means those packets can be discarded during a
   reactive policy event.

   For more comprehensive interpretation, metadata is characterized into
   2 different nature:

   *  Network Metadata: This consists of metadata that specifies how the
      network element should treat that packet.  The network metadata
      comprises of the importance field and is specified in the MSB and
      of size 1 bit.  This field indicates if the packet is more-
      important or less-important.

   *  Application Metadata: This consists of metadata that specifies how
      the application treats that packet.  The appplication metadata
      comprises of 2 fields - Keep/Discard bit and Reliable/Unreliable
      bit.

3.1.  Importance

   Importance bit signifies if the packet is of more importance or less
   importance by the host.  This is specified in the MSB of metadata
   bits and is of 1 bit length.  Importance belongs to Network Metadata.

3.1.1.  Application Treatment

   Application would mark a packet important when it needs the network
   to treat the packet with greater preference compared to the unmarked
   packets.  An example of this interpretation is specified in
   Appendix A.

3.1.2.  Encoding

   More-Important:

   *  When signaled in binary, the Importance bit is set (1).

   *  When signaled in JSON, it is encoded as name "importance" and
      value "true".

   Less-Important:

   *  When signaled in binary, the Importance bit is cleared (0).

   *  When signaled in JSON, it is encoded as name "importance" and
      value "false".

3.2.  Reliable/Unreliable

   Reliable bit indicates if the packet is reliably transmitted by the
   host.  Packets are marked as 'unreliable' or 'reliable':

   *  Reliable packets are re-transmitted by the transport (e.g., TCP or
      [QUIC]) or re-transmitted by the appplication (e.g.,
      [RELIABLE-RTP], NTP).

   *  Unreliable packets are not re-transmitted by the transport (e.g.,
      UDP, [RTP], [LOSSY-QUIC]) and also not re-transmitted by the
      application (e.g., [RTP]).

   Packets marked reliable, if delayed excessively or dropped outright,
   will be re-transmitted by the sender application, appearing on the
   network again.  Thus, delaying or discarding such packets does not
   reduce the amount of transmitted data, it only defers when it appears
   on the network.

   This is specified in the MSB of metadata bits and is of 1 bit length.
   Reliable/Unreliable belongs to Application Metadata.

3.2.1.  Network Treatment

   During a reactive policy event, dropping unreliable traffic is
   preferred over dropping reliable traffic.  The reliable traffic will
   be re-transmitted by the sender so dropping such traffic only defers
   it until later, but this deferral can be useful.

3.2.2.  Encoding

   Reliable:

   *  When signaled in binary, the Reliable bit is set (1).

   *  When signaled in JSON, it is encoded as name "reliable" and value
      "true".

   Unreliable:

   *  When signaled in binary, the Reliable bit is cleared (0).

   *  When signaled in JSON, it is encoded as name "reliable" and value
      "false".

3.3.  Packet Nature/Preference

   Packet Nature indicates discard preference for unreliable traffic and
   reliable traffic, as detailed below.

3.3.1.  Packet Nature for Unreliable Traffic

   Packets are marked as 'discard' or 'keep'.

   Many flows contain a mix of important packets and less-important
   packets, but applications seldom signal that difference themselves
   let alone signal the difference to the network.  Rather, applications
   send everything over a reliable transport (TCP or QUIC) and leave it
   at that, as evidenced by video streaming using TCP.

   With the advent of [LOSSY-QUIC], applications can send both [QUIC]
   reliable traffic and [LOSSY-QUIC] unreliable traffic [LOSSY-QUIC] on
   the same 5-tuple.  With host-to-network metadata signaling, the
   network can become an active assistant in such flows during a
   reactive policy event by endeavouring to send the more-important
   'keep' traffic at the expense of the less-important 'discard'
   traffic.

3.3.1.1.  Network Treatment

   During a reactive policy event, dropping 'discard' packets is
   preferred over dropping 'keep' packets.

3.3.1.2.  Encoding

   Discard:

   *  When signaled in binary, the PacketNature bit is set (1).

   *  When signaled in JSON, it is encoded as name "Discard" and value
      "true".

   Keep:

   *  When signaled in binary, the PacketNature bit is cleared (0).

   *  When signaled in JSON, it is encoded as name "Discard" and value
      "false".

3.3.2.  Packet Nature for Reliable Traffic

   For reliable traffic, the Packet Nature indicates whether the packet
   belongs to bulk or real-time traffic.

3.3.2.1.  Network Treatment

   Realtime traffic prefers lower latency network paths and bulk traffic
   prefers high throughoupt paths.

3.3.2.2.  Encoding

   Realtime:

   *  When signaled in binary, the PacketNature bit is set (1).

   *  When signaled in JSON, it is encoded as name "Realtime" and value
      "true".

   Bulk traffic:

   *  When signaled in binary, the PacketNature bit is cleared (0).

   *  When signaled in JSON, it is encoded as name "Realtime" and value
      "false".

   To adhere to both simple and comprehensive interpretation of the
   metadata, it is vital to order the bits in the same sequence as
   mentioned below.

   MSB - Importance bit.  Bit 1 - Packet Nature bit.  LSB - Reliable/
   Unreliable bit.

   More details on how simple and comprehensive interpretation of
   metadata would work for different types of traffic is listed in
   Appendix A.

4.  Network to Host Metadata

4.1.  Video Streaming Bandwidth

   Monthly data quotas on cellular networks can be easily exceeded by
   video streaming if the client chooses excessively high quality or
   routinely abandons watching videos that were downloaded.  The network
   can assist the client by informing the client of the network's
   bandwidth policy.

   If the video is encoded with variable bit rate, the bitrate cannot
   exceed the indicated bitrate.

   The nominal bitrate is calculated over each second, whereas the burst
   bitrate is calculated over the signaled interval (burst-duration).
   For either measurement, packets can arrive at the start of a second,
   as near as possible behind each other, and the remaining portion of
   that second could have no packets transmitted.

4.1.1.  Host Treatment

   The host chooses a video streaming bit rate at or below the signaled
   rate.

4.1.2.  Encoding

   When signaled in JSON, the bandwidth is encoded as name
   "videoStreamingBandwidth" containing one object containing three
   names: "nominal" and "burstBandwidth" with their values in kilobits
   per second and one name "burstDuration" with its value in
   milliseconds.

   An example of the encoding is in Appendix B.

   Binary encoding and map encoding is unnecessary because the network-
   to-host signaling is never associated with an individual packet.

5.  Security Considerations

   Metadata increases the information available to attackers to
   distinguish important packets from less-important packets, which the
   attacker might use to attack such packets (e.g., prevent their
   delivery) or attempt to decrypt those packets.  It is useful to
   encrypt or obfuscate the metadata information so it is only available
   to end hosts and to participating network elements.  The method of
   encryption or obfuscation is not described in this document but
   rather in other documents describing how this metadata is encoded and
   exchanged amongst hosts and network elements.

6.  IANA Considerations

   Will need a new registry.

Acknowledgments

   To be completed.

References

Normative References

   [LOSSY-QUIC]
              Pauly, T., Kinnear, E., and D. Schinazi, "An Unreliable
              Datagram Extension to QUIC", RFC 9221,
              DOI 10.17487/RFC9221, March 2022,
              <https://www.rfc-editor.org/rfc/rfc9221>.

   [QUIC]     Iyengar, J., Ed. and M. Thomson, Ed., "QUIC: A UDP-Based
              Multiplexed and Secure Transport", RFC 9000,
              DOI 10.17487/RFC9000, May 2021,
              <https://www.rfc-editor.org/rfc/rfc9000>.

   [RELIABLE-RTP]
              Rey, J., Leon, D., Miyazaki, A., Varsa, V., and R.
              Hakenberg, "RTP Retransmission Payload Format", RFC 4588,
              DOI 10.17487/RFC4588, July 2006,
              <https://www.rfc-editor.org/rfc/rfc4588>.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/rfc/rfc2119>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/rfc/rfc8174>.

   [RTP]      Schulzrinne, H., Casner, S., Frederick, R., and V.
              Jacobson, "RTP: A Transport Protocol for Real-Time
              Applications", STD 64, RFC 3550, DOI 10.17487/RFC3550,
              July 2003, <https://www.rfc-editor.org/rfc/rfc3550>.

Informative References

   [I-D.herbert-host2netsig]
              Herbert, T., "Host to Network Signaling", Work in
              Progress, Internet-Draft, draft-herbert-host2netsig-00, 4
              October 2023, <https://datatracker.ietf.org/doc/html/
              draft-herbert-host2netsig-00>.

   [I-D.kaippallimalil-tsvwg-media-hdr-wireless]
              Kaippallimalil, J., Gundavelli, S., and S. Dawkins, "Media
              Header Extensions for Wireless Networks", Work in
              Progress, Internet-Draft, draft-kaippallimalil-tsvwg-
              media-hdr-wireless-03, 16 October 2023,
              <https://datatracker.ietf.org/doc/html/draft-
              kaippallimalil-tsvwg-media-hdr-wireless-03>.

   [I-D.reddy-tsvwg-explcit-signal]
              Reddy.K, T., Wing, D., and M. Boucadair, "An Approach for
              Encrypted Transport Protocol Path Explicit Signals", Work
              in Progress, Internet-Draft, draft-reddy-tsvwg-explcit-
              signal-01, 7 July 2023,
              <https://datatracker.ietf.org/doc/html/draft-reddy-tsvwg-
              explcit-signal-01>.

   [I-D.wing-cidfi]
              Wing, D., Reddy.K, T., and M. Boucadair, "Framework for
              CID Flow Indicator (CIDFI)", Work in Progress, Internet-
              Draft, draft-wing-cidfi-04, 14 December 2023,
              <https://datatracker.ietf.org/doc/html/draft-wing-cidfi-
              04>.

   [RFC2475]  Blake, S., Black, D., Carlson, M., Davies, E., Wang, Z.,
              and W. Weiss, "An Architecture for Differentiated
              Services", RFC 2475, DOI 10.17487/RFC2475, December 1998,
              <https://www.rfc-editor.org/rfc/rfc2475>.

   [RFC3246]  Davie, B., Charny, A., Bennet, J.C.R., Benson, K., Le
              Boudec, J.Y., Courtney, W., Davari, S., Firoiu, V., and D.
              Stiliadis, "An Expedited Forwarding PHB (Per-Hop
              Behavior)", RFC 3246, DOI 10.17487/RFC3246, March 2002,
              <https://www.rfc-editor.org/rfc/rfc3246>.

   [RFC7657]  Black, D., Ed. and P. Jones, "Differentiated Services
              (Diffserv) and Real-Time Communication", RFC 7657,
              DOI 10.17487/RFC7657, November 2015,
              <https://www.rfc-editor.org/rfc/rfc7657>.

   [RFC8200]  Deering, S. and R. Hinden, "Internet Protocol, Version 6
              (IPv6) Specification", STD 86, RFC 8200,
              DOI 10.17487/RFC8200, July 2017,
              <https://www.rfc-editor.org/rfc/rfc8200>.

   [RFC8622]  Bless, R., "A Lower-Effort Per-Hop Behavior (LE PHB) for
              Differentiated Services", RFC 8622, DOI 10.17487/RFC8622,
              June 2019, <https://www.rfc-editor.org/rfc/rfc8622>.

   [RFC8837]  Jones, P., Dhesikan, S., Jennings, C., and D. Druta,
              "Differentiated Services Code Point (DSCP) Packet Markings
              for WebRTC QoS", RFC 8837, DOI 10.17487/RFC8837, January
              2021, <https://www.rfc-editor.org/rfc/rfc8837>.

Appendix A.  Examples of Host-to-Network Metadata

A.1.  Video Streaming

   Streaming video contains the occasional key frame ("i-frame")
   containing a full video frame.  These are necessary to rebuild
   receiver state after loss of delta frames.  The key frames are
   therefore more critical to deliver to the receiver than delta frames.

   Streaming video also contains audio frames which can be encoded
   separately and thus can be signaled separately.  Audio is more
   critical than video for almost all applications, but its importance
   is still an application decision.  In the example below, the audio is
   more important than video (importance=high, KD=keep, RU=reliable),
   video key frames have middle importance (importance=low, discard,
   reliable), and video delta frames have least importance
   (importance=low, KD=discard, RU=unreliable).

   Comprehensive Interpretation:

      +===================+============+==============+============+
      |    Traffic type   | Importance | PacketNature |     RU     |
      +===================+============+==============+============+
      |  video key frame  |    low     |   realtime   |  reliable  |
      +-------------------+------------+--------------+------------+
      | video delta frame |    low     |   discard    | unreliable |
      +-------------------+------------+--------------+------------+
      |       audio       |    high    |   realtime   |  reliable  |
      +-------------------+------------+--------------+------------+

          Table 1: Example Values for Video Streaming Metadata -
                       Comprehensive Interpretation

   Simple Interpretation:

               +===================+=======================+
               |    Traffic type   | Simple Interpretation |
               +===================+=======================+
               |  video key frame  |          011          |
               +-------------------+-----------------------+
               | video delta frame |          001          |
               +-------------------+-----------------------+
               |       audio       |          111          |
               +-------------------+-----------------------+

                     Table 2: Example Values for Video
                        Streaming Metadata - Simple
                               Interpretation

A.2.  Interactive Gaming or Audio/Video

   Both gaming (video in both directions, audio in both directions,
   input devices from client to server) and interactive audio/video
   (VoIP, video conference) involves important traffic in both
   directions -- thus is a slightly more complicated use-case than the
   previous example.  Additionally, most Internet service providers
   constrain upstream bandwidth so proper packet treatment is critical
   in the upstream direction.

   Comprehensive Interpretation:

      +===================+============+==============+============+
      |    Traffic type   | Importance | PacketNature |     RU     |
      +===================+============+==============+============+
      |  video key frame  |    low     |   realtime   |  reliable  |
      +-------------------+------------+--------------+------------+
      | video delta frame |    low     |   discard    | unreliable |
      +-------------------+------------+--------------+------------+
      |       audio       |    high    |   realtime   |  reliable  |
      +-------------------+------------+--------------+------------+

        Table 3: Example Values for Interactive A/V, downstream -
                       Comprehensive Interpretation

      +===================+============+==============+============+
      |    Traffic type   | Importance | PacketNature |     RU     |
      +===================+============+==============+============+
      |  video key frame  |    low     |   realtime   |  reliable  |
      +-------------------+------------+--------------+------------+
      | video delta frame |    low     |   discard    | unreliable |
      +-------------------+------------+--------------+------------+
      |       audio       |    high    |   realtime   |  reliable  |
      +-------------------+------------+--------------+------------+

         Table 4: Example Values for Interactive A/V, upstream -
                       Comprehensive Interpretation

   Simple Interpretation:

               +===================+=======================+
               |    Traffic type   | Simple Interpretation |
               +===================+=======================+
               |  video key frame  |          011          |
               +-------------------+-----------------------+
               | video delta frame |          001          |
               +-------------------+-----------------------+
               |       audio       |          111          |
               +-------------------+-----------------------+

                  Table 5: Example Values for Interactive
                  A/V, downstream - Simple Interpretation

               +===================+=======================+
               |    Traffic type   | Simple Interpretation |
               +===================+=======================+
               |  video key frame  |          011          |
               +-------------------+-----------------------+
               | video delta frame |          000          |
               +-------------------+-----------------------+
               |       audio       |          111          |
               +-------------------+-----------------------+

                  Table 6: Example Values for Interactive
                   A/V, upstream - Simple Interpretation

   Many interactive audio/video applications also support sharing the
   presenter's screen, file, video, or pictures.  During this sharing
   the presenter's video is less important but the screen or picture is
   more important.  This change of imporance can be conveyed in metadata
   to the network, as in the table below:

   Comprehensive Interpretation:

      +===================+============+==============+============+
      |    Traffic type   | Importance | PacketNature |     RU     |
      +===================+============+==============+============+
      |  video key frame  |    low     |   realtime   |  reliable  |
      +-------------------+------------+--------------+------------+
      | video delta frame |    low     |   discard    | unreliable |
      +-------------------+------------+--------------+------------+
      |       audio       |    high    |   realtime   |  reliable  |
      +-------------------+------------+--------------+------------+
      |  picture sharing  |    high    |   realtime   |  reliable  |
      +-------------------+------------+--------------+------------+

         Table 7: Example Values for Interactive A/V, upstream -
                       Comprehensive Interpretation

   Simple Interpretation:

               +===================+=======================+
               |    Traffic type   | Simple Interpretation |
               +===================+=======================+
               |  video key frame  |          011          |
               +-------------------+-----------------------+
               | video delta frame |          000          |
               +-------------------+-----------------------+
               |       audio       |          111          |
               +-------------------+-----------------------+
               |  picture sharing  |          111          |
               +-------------------+-----------------------+

                  Table 8: Example Values for Interactive
                   A/V, upstream - Simple Interpretation

   In many scenarios a game or VoIP application will want to signal
   different metadata for the same type of packet in each direction.
   For example, for a game, video in the server-to-client direction
   might be more important than audio, whereas input devices (e.g.,
   keystrokes) might be more important than audio.

A.3.  Remote Desktop Virtualization

   Example packet metadata for Desktop Virtualization (like Citrix
   Virtual Apps and Desktops - CVAD) application.  This is shown in two
   tables, client-to-server traffic (Table 9)(Table 11) and server-to-
   client traffic (Table 10)(Table 12).

   Comprehensive Interpretation:

   +================+==========+==============+==========+=============+
   |  Traffic type  |Importance| PacketNature |Reliable/ |   Comments  |
   |                |          |              |Unreliable|             |
   +================+==========+==============+==========+=============+
   |  User typing   |   high   |   realtime   | reliable |             |
   +----------------+----------+--------------+----------+-------------+
   |  Mouse click/  |   high   |   realtime   | reliable |  The start  |
   |  End Position  |          |              |          | and endpoint|
   |                |          |              |          |    of the   |
   |                |          |              |          |   pointer   |
   |                |          |              |          | movement is |
   |                |          |              |          |   vital to  |
   |                |          |              |          | ensure user |
   |                |          |              |          |  action is  |
   |                |          |              |          |  completed  |
   |                |          |              |          |  correctly. |
   |                |          |              |          |   So, the   |
   |                |          |              |          |  endpoints  |
   |                |          |              |          |  have to be |
   |                |          |              |          |   reliably  |
   |                |          |              |          | transmitted |
   |                |          |              |          |  with real- |
   |                |          |              |          |     time    |
   |                |          |              |          | priority. **|
   +----------------+----------+--------------+----------+-------------+
   |  Interactive   |   high   |     keep     |unreliable|             |
   |     audio      |          |              |          |             |
   +----------------+----------+--------------+----------+-------------+
   | Authentication |   low    |   realtime   | reliable |             |
   |    - Finger    |          |              |          |             |
   |  print, smart  |          |              |          |             |
   |      card      |          |              |          |             |
   +----------------+----------+--------------+----------+-------------+
   |  Interactive   |   low    |     keep     |unreliable|  Video key  |
   |   video key    |          |              |          | frames form |
   |     frame      |          |              |          |   the base  |
   |                |          |              |          | frames of a |
   |                |          |              |          |  video upon |
   |                |          |              |          |  which the  |
   |                |          |              |          |   next 'n'  |
   |                |          |              |          | timeframe of|
   |                |          |              |          |    video    |
   |                |          |              |          |  updates is |
   |                |          |              |          | applied on. |
   |                |          |              |          |    These    |
   |                |          |              |          | frames, are |
   |                |          |              |          |    hence,   |
   |                |          |              |          | critical and|
   |                |          |              |          |   without   |
   |                |          |              |          |  them, the  |
   |                |          |              |          | video would |
   |                |          |              |          |    not be   |
   |                |          |              |          |   coherent  |
   |                |          |              |          |  until the  |
   |                |          |              |          |     next    |
   |                |          |              |          |   critical  |
   |                |          |              |          |   frame is  |
   |                |          |              |          |  received.  |
   |                |          |              |          | Retransmits |
   |                |          |              |          | of these are|
   |                |          |              |          |  harmful to |
   |                |          |              |          | the UX. *** |
   +----------------+----------+--------------+----------+-------------+
   | Mouse position |   low    |   discard    |unreliable|   When the  |
   |    tracking    |          |              |          |  pointer is |
   |                |          |              |          |  moved from |
   |                |          |              |          | one point to|
   |                |          |              |          | another, the|
   |                |          |              |          | coordinates |
   |                |          |              |          |    of the   |
   |                |          |              |          |   pointers  |
   |                |          |              |          | between the |
   |                |          |              |          |  two points |
   |                |          |              |          | can be lost |
   |                |          |              |          | without much|
   |                |          |              |          | of an impact|
   |                |          |              |          | to the UX as|
   |                |          |              |          | long as the |
   |                |          |              |          |  start and  |
   |                |          |              |          |   endpoint  |
   |                |          |              |          |   reaches.  |
   |                |          |              |          |  This would |
   |                |          |              |          |  ensure the |
   |                |          |              |          | user action |
   |                |          |              |          |      is     |
   |                |          |              |          |  completed, |
   |                |          |              |          | even if the |
   |                |          |              |          |  experience |
   |                |          |              |          |    seems    |
   |                |          |              |          |   glitchy.  |
   +----------------+----------+--------------+----------+-------------+
   |  Interactive   |   low    |   discard    |unreliable|             |
   |  video delta   |          |              |          |             |
   |     frame      |          |              |          |             |
   +----------------+----------+--------------+----------+-------------+

         Table 9: Example Values for Remote Desktop Virtualization
         Metadata, client to server - Comprehensive Interpretation

   +===========+==========+==============+==========+==================+
   |  Traffic  |Importance| PacketNature |Reliable/ |     Comments     |
   |    type   |          |              |Unreliable|                  |
   +===========+==========+==============+==========+==================+
   |   Glyph   |   high   |     keep     | reliable | The frames that  |
   |  critical |          |              |          |  form the base   |
   |           |          |              |          |  for the image   |
   |           |          |              |          |     is more      |
   |           |          |              |          |   critical and   |
   |           |          |              |          |   needs to be    |
   |           |          |              |          |  transmitted as  |
   |           |          |              |          |   reliably as    |
   |           |          |              |          |    possible.     |
   |           |          |              |          |  Retransmits of  |
   |           |          |              |          |    these are     |
   |           |          |              |          |  harmful to the  |
   |           |          |              |          |      UX.**       |
   +-----------+----------+--------------+----------+------------------+
   |Interactive|   high   |     keep     |unreliable|                  |
   |    (or    |          |              |          |                  |
   | streaming)|          |              |          |                  |
   |   audio   |          |              |          |                  |
   +-----------+----------+--------------+----------+------------------+
   |   Haptic  |   high   |   discard    |unreliable|   Virtualizing   |
   |  feedback |          |              |          | haptic feedback  |
   |           |          |              |          |   is real-time   |
   |           |          |              |          |     and high     |
   |           |          |              |          |    importance    |
   |           |          |              |          |   although the   |
   |           |          |              |          |  feedback being  |
   |           |          |              |          |  delivered late  |
   |           |          |              |          |  is of no use.   |
   |           |          |              |          | So dropping the  |
   |           |          |              |          |      packet      |
   |           |          |              |          |  altogether and  |
   |           |          |              |          |       not        |
   |           |          |              |          |  retransmitting  |
   |           |          |              |          |  it makes more   |
   |           |          |              |          |      sense       |
   +-----------+----------+--------------+----------+------------------+
   |Interactive|   low    |     keep     |unreliable|    Video key     |
   |    (or    |          |              |          | frames form the  |
   | streaming)|          |              |          |  base frames of  |
   | video key |          |              |          |   a video upon   |
   |   frame   |          |              |          |  which the next  |
   |           |          |              |          |  'n' timeframe   |
   |           |          |              |          |     of video     |
   |           |          |              |          |    updates is    |
   |           |          |              |          |   applied on.    |
   |           |          |              |          |  These frames,   |
   |           |          |              |          |    are hence,    |
   |           |          |              |          |   critical and   |
   |           |          |              |          |  without them,   |
   |           |          |              |          | the video would  |
   |           |          |              |          | not be coherent  |
   |           |          |              |          |  until the next  |
   |           |          |              |          |  critical frame  |
   |           |          |              |          |   is received.   |
   |           |          |              |          |  Retransmits of  |
   |           |          |              |          |    these are     |
   |           |          |              |          |  harmful to the  |
   |           |          |              |          |     UX. ***      |
   +-----------+----------+--------------+----------+------------------+
   | File copy |   low    |     bulk     | reliable |                  |
   +-----------+----------+--------------+----------+------------------+
   |Interactive|   low    |   discard    |unreliable|      Video       |
   |    (or    |          |              |          |    predictive    |
   | streaming)|          |              |          |  frames can be   |
   |   video   |          |              |          |   lost, which    |
   | predictive|          |              |          | would result in  |
   |   frame   |          |              |          |   minor glitch   |
   |           |          |              |          |     but not      |
   |           |          |              |          |  compromise the  |
   |           |          |              |          |  user activity   |
   |           |          |              |          | and video would  |
   |           |          |              |          |     still be     |
   |           |          |              |          |   coherent and   |
   |           |          |              |          |   useful.  The   |
   |           |          |              |          |   reception of   |
   |           |          |              |          |    subsequent    |
   |           |          |              |          | video key frame  |
   |           |          |              |          |  would mitigate  |
   |           |          |              |          |   the loss in    |
   |           |          |              |          |  quality caused  |
   |           |          |              |          |     by lost      |
   |           |          |              |          |    predictive    |
   |           |          |              |          |     frames.      |
   +-----------+----------+--------------+----------+------------------+
   |   Glyph   |   low    |   discard    |Unreliable|  The smoothing   |
   | smoothing |          |              |          | elements of the  |
   |           |          |              |          |   glyph can be   |
   |           |          |              |          |  lost and would  |
   |           |          |              |          | still present a  |
   |           |          |              |          |   recognizable   |
   |           |          |              |          | image, although  |
   |           |          |              |          |  with a lesser   |
   |           |          |              |          |     quality.     |
   |           |          |              |          |   Hence, these   |
   |           |          |              |          |  can be marked   |
   |           |          |              |          |     as loss      |
   |           |          |              |          | tolerant as the  |
   |           |          |              |          |  user action is  |
   |           |          |              |          | still completed  |
   |           |          |              |          |   with a small   |
   |           |          |              |          |  compromise to   |
   |           |          |              |          |     the UX.      |
   |           |          |              |          |  Moreover, with  |
   |           |          |              |          |  the reception   |
   |           |          |              |          |   of the next    |
   |           |          |              |          |  glyph critical  |
   |           |          |              |          |   frame would    |
   |           |          |              |          |   mitigate the   |
   |           |          |              |          | loss in quality  |
   |           |          |              |          |  caused by lost  |
   |           |          |              |          | glyph smoothing  |
   |           |          |              |          |    elements.     |
   +-----------+----------+--------------+----------+------------------+

         Table 10: Example Values for Remote Desktop Virtualization
         Metadata, server to client - Comprehensive Interpretation

   Simple Interpretation:

   +===========================================+=======================+
   |                Traffic type               | Simple Interpretation |
   +===========================================+=======================+
   |                User typing                |          111          |
   +-------------------------------------------+-----------------------+
   |          Mouse click/End Position         |          111          |
   +-------------------------------------------+-----------------------+
   |             Interactive audio             |          110          |
   +-------------------------------------------+-----------------------+
   |          Authentication - Finger          |          011          |
   |             print, smart card             |                       |
   +-------------------------------------------+-----------------------+
   |           Interactive video key           |          010          |
   |                   frame                   |                       |
   +-------------------------------------------+-----------------------+
   |          Mouse position tracking          |          000          |
   +-------------------------------------------+-----------------------+
   |          Interactive video delta          |          000          |
   |                   frame                   |                       |
   +-------------------------------------------+-----------------------+

         Table 11: Example Values for Remote Desktop Virtualization
             Metadata, client to server - Simple Interpretation

       +==================================+=======================+
       |           Traffic type           | Simple Interpretation |
       +==================================+=======================+
       |          Glyph critical          |          111          |
       +----------------------------------+-----------------------+
       | Interactive (or streaming) audio |          110          |
       +----------------------------------+-----------------------+
       |         Haptic feedback          |          100          |
       +----------------------------------+-----------------------+
       | Interactive (or streaming) video |          010          |
       |            key frame             |                       |
       +----------------------------------+-----------------------+
       |            File copy             |          001          |
       +----------------------------------+-----------------------+
       | Interactive (or streaming) video |          000          |
       |         predictive frame         |                       |
       +----------------------------------+-----------------------+
       |         Glyph smoothing          |          000          |
       +----------------------------------+-----------------------+

               Table 12: Example Values for Remote Desktop
            Virtualization Metadata, server to client - Simple
                              Interpretation

   *** A video key frame should be handled differently by the network
   depending on a streaming application versus a remote desktop
   application.  The video streaming application's primary and only
   nature of traffic is video and audio.  In contrast, a remote desktop
   application might be playing a video and its associated audio while
   at the same time the user is editing a document.  The user's
   keystrokes and those glyphs need to be prioritized over the video
   lest the user think their inputs are being ignored (and type the same
   characters again).  Hence, the values are different even for the same
   nature of traffic but a different application.

Appendix B.  Example of Network-to-Host Metadata for Video Streaming

   A network element can signal the bandwidth allowed for video
   streaming.  Typically this policy limit only exists with cellular
   network operators (rather than a Wi-Fi network for example).

   The example below indicate the burst bandwidth (2Mbps), burst
   duration (3 seconds), and nominal (non-burst) bandwidth (1Mbps) for
   the requesting user:

   {
     "videoStreamingBandwidth": {
       "burst": 2048,
       "burstDuration": 3000,
       "nominal": 1024
     }
   }

Authors' Addresses

   Sridharan Rajagopalan
   Cloud Software Group Holdings, Inc.
   United States of America
   Email: sridharan.girish@gmail.com


   Dan Wing
   Cloud Software Group Holdings, Inc.
   United States of America
   Email: danwing@gmail.com
